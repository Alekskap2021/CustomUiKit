# О проекте

## Техническое задание

- **Реализовать 3 UI компонента в соответствии с [дизайном](https://www.figma.com/file/OseNWZWoC2aMv1yTEUNIAo/Tasks-for-the-test-period?node-id=0%3A1&t=3ir3uf3gLVXCiYRQ-1)**
  **Страницы:**

1. Компонент Button который принимает стандартные состояния ванильной кнопки, а также props которые меняют отображения

2. Компонент Dropdown который будет вставляться по соседству с вызываемой кнопкой. Если нажать на кнопку то окно dropdown должна отображаться по умолчанию сверху и отцентрована по кнопке вызывающая данное окно.
   Окно dropdown должно автоматически рассчитывать координаты по X и Y и адаптивно отображаться.
   Закрытие окна должно происходить либо с событием вызванным родителем dropdown, так и вызываться внутри компонента при клике вне области отображения компонента.

3. На основе реализованного Dropdown нужно сделать компонент Tooltip который вызывается вместо клика событием при наведении.

## Опционально реализовано

1. Состояние clip-view, full-size и загрузки в кнопке

2. Наследование типов в зависимости от аттрибутов в кнопке

3. Пропсы theme, withArrow и preferSide в Dropdown

### Слабые места проекта

#### _Есть проблемы при отображении окна по краям из-за position:absolute_

##### Как можно решить?

    - На будущее, при реализации таких вещей стоит смотреть референсы на исходный код похожих/таких
      компонентов. Чтобы не допускать подобных ошибок на этапе проектирования

    - На момент сейчас - выделить время и немного изменить логику скриптов позиционирования
      и поменять absolute на fixed
      
 UPD. Я выделил один день на то, чтобы поискать референсы и почитать их исходный код. Одни из примеров можно посмотреть [тут](https://flatpickr.js.org/examples/), а его исходный код `[здесь](https://github.com/flatpickr/flatpickr).  
Пришел к выводу что наиболее оптимизировано реализовать функционал автоматического позиционирования можно при помощи [React CreatePortal](https://react.dev/reference/react-dom/createPortal). 
Идея моего подхода в том, чтобы изнутри компонента зарендерить окно подсказки на верхнем уровне DOM дерева, оставив при этом ему _position: absolute_ и позиционировать его относительно всего документа по координатам триггера. Это позволит:
- Сделать компонент окна не зависимым от триггера и легко переиспользуемым в других местах при необходимости. Так, например, и DropDown и Tooltip смогут ссылаться на один и тот же компонент, но внутри себя рендерить его на самом верхнем уровне DOM дерева
- Избавит от различных сценариев, когда у родителя может быть _overflow: hidden_.
- Избавит от вычислений при скролле, необходимых при решении через _position: fixed_.
- Доступ к компоненту окна с подсказкой все еще будет на уровне компонента, который ее использует. Не придется долго его искать по папкам. 

*Вот пример того, что я имею ввиду:*
```
<>
  <Button
    className={cn("dropdown__btn", btnClassName)}
    label={label}
    ref={btnRef}
    as="button"
    onClick={() =>  setIsOpened((prev) => !prev)}
    {...otherProps}
  />
  
  {createPortal(
    <TooltipWindow  className={cn({ "tooltip-window_active":  isOpened })}  ref={tooltipRef}>
      {children}
    </TooltipWindow>,
    document.body
  )}
</>
```

В этом сценарии нам даже не понадобилась ненужная обертка. С точки зрения семантики в html у нас рендерится просто кнопка, а подсказка будет лежать в самом верхем уровне.

##### Почему я этого не сделал?

    - На этапе проектирования пренебрег референсами, когда обнаружилась ошибка, дедлайны не позволяли
      внести глобальные изменения

#### _При появлении/скрывании элемента есть баг с наложением непрощрачности элемента стрелки с элементом подсказки_

Это связано с тем, что подсказка и стрелка - разные элементы, которые наложены друг на друга

##### Как можно решить?

    - Использовать в кач-ве стрелки svg треугольника. Это позволит не накладывать 2 элемента друг на друга

##### Почему я этого не сделал?

    - Были более приоритетные задачи по тз. Так же в зонах роста проекта есть анимация появления.
      При решении бага со стрелкой нужно отталкиваться от этого.

### Зоны роста проекта

    - Реализовать возможность передачи в кнопку иконок, их позиционирования. 
    Добавить возможность оставлять только иконку без текста

    - Добавить темы для скролла Dropdown, дать возможность пользователю кастомизировать скролл извне. 
    Добавить виды анимаций для появления всплывающей подсказки. Добавить вложенность дропдаунов

## При разработке испольовались

- [TypeScript](https://www.typescriptlang.org/docs/)
- [ClassNames](https://www.npmjs.com/package/classnames)
- [React](https://ru.reactjs.org/)
- [Storybook](https://storybook.js.org/)
- [Jest-DOM](https://testing-library.com/docs/ecosystem-jest-dom/)
